@page "/seasonal-recipes/{season?}"
@using Microsoft.EntityFrameworkCore;
@if (Season != null)
{
    <h3>Seasonal Recipes@($" for {Season}")</h3>
}
else
{
    <h3>Seasonal Recipes</h3>
}
@if (Recipes.Any())
{
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Matching Ingredient(s)</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var recipe in Recipes)
            {
                <tr>
                    <td>
                        <a href="/recipes/@recipe.Id.ToString()">
                            @recipe.Name
                        </a>
                    </td>
                    <td>
                        <ul>
                            @foreach (var ingredient in recipe.Ingredients.Where(i => seasonals.Any(s => s.Name == i.Name)))
                            {
                                <li>@ingredient.Name (@(seasonals.First(s => s.Name == ingredient.Name).Season))</li>
                            }
                        </ul>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p>No seasonal recipes found.</p>
}
@code {
    [Parameter] public string? season { get; set; }
    Season? Season => Enum.TryParse<Season>(season, true, out var result) ? result : null;
    List<Recipe> Recipes { get; set; } = new();
    List<SeasonalIngredient> seasonals = new();
    protected override async Task OnInitializedAsync()
    {
        if (season is not null)
        {
            using var dbContext = new RecipeDbContext();

            seasonals = await
            dbContext.SeasonalIngredients
            .Where(s => s.Season == Season)
            .ToListAsync();

            Recipes = await
            dbContext.Recipes
            .Include(r => r.Ingredients)
            .ToListAsync();
        }
    }
}
<style>
    table {
        width: 100%;
        border-collapse: collapse;
    }

    th,
    td {
        border: 1px solid black;
        padding: 8px;
        text-align: left;
    }

    th {
        background-color: #f2f2f2;
    }

    tr:nth-child(even) {
        background-color: #eee;

        &:hover {
            background-color: #efe;
        }
    }

    tr {
        background-color: #fff;

        &:hover {
            background-color: #efe;
        }
    }

    ul {
        list-style-type: none;
        padding: 0;
    }

    li {
        display: inline;
    }

    li::before {
        content: "ðŸ”¹";
    }
</style>